[Перелік усіх робіт](README.md)

# Лабораторна робота №9. Обробка графіки. Бібліотека GD

## Мета роботи

Навчитися створювати, змінювати та зберігати зображення за допомогою бібліотеки GD2 на мові PHP

## Обладнання

Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera

## Теоретичні відомості

### GD Graphics Library 

GD (Graphics Draw) - це бібліотека функцій у PHP для роботи з зображеннями. Вона надає засоби для створення, модифікації та маніпуляції растровими зображеннями (зображеннями, представленими у вигляді пікселів).

GD дозволяє вам робити наступне:

Створювати нові зображення.
Зчитувати і відкривати існуючі зображення в різних форматах, включаючи JPEG, PNG, GIF і інші.
Виконувати різноманітні операції з обрізкою, масштабуванням і обертанням зображень.
Додавати текст та графіку до зображень.
Змінювати кольори та фільтри для зображень.
Зберігати модифіковані зображення у різних форматах.
З бібліотекою GD можна створювати динамічно зображення на основі даних, генерувати діаграми, водяні знаки, зображення для графічних кнопок і багато іншого. Вона широко використовується для створення графічних компонентів веб-сайтів, обробки зображень та розробки додатків, які потребують роботи з графікою.

GD є однією з вбудованих бібліотек у PHP, тож ви зазвичай не потребуєте окремої інсталяції. Ви можете використовувати функції GD у своїх PHP-сценаріях для роботи з зображеннями.

### Scalable Vector Graphics

SVG (Scalable Vector Graphics) - це векторний формат зображень, який використовується для опису двомірних графічних об'єктів та їхніх властивостей у веб-розробці. Векторні зображення описуються за допомогою математичних формул, які визначають розміри, форми, кольори та інші атрибути графічних об'єктів.

Основні особливості SVG:

Масштабованість: SVG-зображення можна збільшувати або зменшувати без втрати якості. Векторний формат базується на математичних рівняннях, тому графіка завжди залишається чіткою.

XML-формат: SVG представляє собою підмножину XML, що робить його легким для редагування та генерації з використанням звичайних текстових редакторів.

Підтримка графічних об'єктів: SVG дозволяє створювати такі графічні об'єкти, як лінії, кола, прямокутники, криві, текст та багато інших. Ви також можете додавати заповнення, контур, кольори та анімацію до цих об'єктів.

Підтримка тексту: SVG дозволяє вставляти текст та використовувати різні шрифти для створення графіки з текстовим вмістом.

Анімація: SVG підтримує анімацію, що дозволяє створювати рух та перетворення графічних об'єктів в межах зображення.

Векторні фільтри та ефекти: SVG дозволяє застосовувати фільтри та ефекти до графічних об'єктів, такі як тіні, розмиття і т. д.

Вбудована міжнародна підтримка: SVG підтримує текстові об'єкти з різних мов та інтернаціоналізацію.

SVG-зображення використовуються в веб-розробці для створення векторної графіки на веб-сайтах, включаючи логотипи, іконки, діаграми, картки та багато іншого. Вони особливо корисні, коли необхідно мати зображення, які можна масштабувати на різних пристроях та дозвіл з екраном.

### Основні функції GD

- imagecreatefromjpeg(): Завантажує JPEG-зображення і створює об'єкт-зображення.
- imagecreatefrompng(): Завантажує PNG-зображення і створює об'єкт-зображення.
- imagecreatefromgif(): Завантажує GIF-зображення і створює об'єкт-зображення.
- imagecreate(): Створює нове порожнє зображення заданого розміру.
- imagecopyresized(): Копіює та змінює розмір зображення.
- imagecolorallocate(): Виділяє новий колір для зображення.
- imagettftext(): Додає текст TrueType на зображення.
- imagefilter(): Застосовує фільтр до зображення, наприклад, розмиття або ефект "сепія".
- imagepolygon(): Малює багатокутник з заданими вершинами.
- imagearc(): Малює дугу або коло.
- imagerectangle(): Малює прямокутник.
- imagefill(): Заповнює область зображення заданим кольором.
- imagecopy(): Копіює частину одного зображення на інше.
- imagepng(): Виводить PNG-зображення на веб-сторінку або зберігає його у файлі.
- imagejpeg(): Виводить JPEG-зображення на веб-сторінку або зберігає його у файлі.
- imagegif(): Виводить GIF-зображення на веб-сторінку або зберігає його у файлі.

### Перелік основних елементів SVG

- `<svg>` Основний елемент SVG, який обгортає всі інші елементи SVG. Визначає область, в якій малюються графічні об'єкти.
- `<circle>` Визначає коло за допомогою координат центру та радіусу.
- `<rect>` Визначає прямокутник за допомогою координат верхнього лівого кута, ширини та висоти.
- `<line>` Визначає лінію за допомогою координат двох кінців.
- `<polygon>` Визначає багатокутник за допомогою координат вершин.
- `<path>` Визначає складні форми та шляхи, використовуючи команди мови SVG.
- `<text>` Визначає текст та його розміщення на зображенні.
- `<g>` Групує графічні об'єкти в одну групу. Використовується для застосування змін до всієї групи одночасно.
- `<defs>` Визначає визначення, які можна використовувати для перевикористання елементів, таких як заливка або градієнти.
- `<image>` Додає растрове зображення на SVG-зображення.
- `<linearGradient>` Визначає градієнт, який змінює кольори по лінії.
- `<radialGradient>` Визначає градієнт, який змінює кольори від центру до окружності.
- `<clipPath>` Визначає область вирізання для обмеження відображення інших елементів.
- `<pattern>` Визначає текстурний малюнок, який можна використовувати для заповнення областей.
- `<mask>` Визначає маску для приховування частини іншого елементу.

## Хід роботи

1. Впевніться, що пакет XAMPP встановлено та web-сервер Apache запущений
2. Перейдіть до каталогу `C:\xampp\htdocs\` та очистіть його
3. В каталогу `C:\xampp\htdocs\` створіть файли з іменем index.php
4. Перевірте, чи підключена бібліотека GD2 викликом функції `php_info()` та аналізом отриманої сторінки
5. У випадку, якщо GD відключений, відредагуйте файл `C:\xampp\php\php.ini` наступним чином:
   - Знайдіть рядок `;extension=gd`
   - Приберіть `;` на початку рядку
   - Збережіть файл
   - Перезавантажте сервер Apache
   - Перезавантажте сторінку з `php_info()` та впевніться, що GD2 присутній серед встановлених розширень
6. Відкрийте index.php та збережіть у ньому наступний код:

```php
- <?php
// Розмір та кольори
$width = 400;
$height = 400;

// Створення нового зображення
$image = imagecreatetruecolor($width, $height);

$background_color = imagecolorallocate($image, 255, 255, 255);
$border_color = imagecolorallocate($image, 0, 0, 0);

// Заповнення фону
imagefill($image, 0, 0, $background_color);

// Основний край кругової діаграми
$center_x = $width / 2;
$center_y = $height / 2;
$radius = 100;
$total = 360; // Всього градусів

// Сектор 1: 40%
$color1 = imagecolorallocate($image, 255, 0, 0);
$angle1 = (40 / 100) * $total;
imagefilledarc($image, $center_x, $center_y, $radius * 2, $radius * 2, 0, $angle1, $color1, IMG_ARC_PIE);

// Сектор 2: 30%
$color2 = imagecolorallocate($image, 0, 255, 0);
$angle2 = (30 / 100) * $total;
imagefilledarc($image, $center_x, $center_y, $radius * 2, $radius * 2, $angle1, $angle1 + $angle2, $color2, IMG_ARC_PIE);

// Сектор 3: 30%
$color3 = imagecolorallocate($image, 0, 0, 255);
$angle3 = (30 / 100) * $total;
imagefilledarc($image, $center_x, $center_y, $radius * 2, $radius * 2, $angle1 + $angle2, $angle1 + $angle2 + $angle3, $color3, IMG_ARC_PIE);


// Виведення зображення
header('Content-Type: image/png');
imagepng($image);

// Звільнення ресурсів
imagedestroy($image);
?>
```

Збережіть файл, та подивіться результати роботи у браузері.
7. Виконайте сфмостійне завдання 1:
   - Враховуючи попередні лабораторні роботи, створіть файл XML або JSON із довільними даними для стовпчатої діаграми. Внесіть у нього дані.
   - Зчитайте дані з файлу, на основі цих даних побудуйте діаграму
   - Додайте на діаграму підпис - Група, ПІП, дата
   - Змініть сценарій таким чином, щоб у якості додаткових параметрів він приймав вихідні розміри зображення.
8. Виконайте сфмостійне завдання 2:
   - Реалізуйте стовпчату діаграму із попереднього завдання за допомогою векторного формату SVG
9. Виконайте сфмостійне завдання 3:
   - Створіть сценарій який у якості параметру приймає адресу зображення на диску.
   - Завантажте файл зображення з диску. Змініть його додавши підпис - Група, ПІП, дата
   - Збережіть зображення
   - Відвантажте змінене зображення користувачеві.
10. Для кожного етапу роботи зробити знімки екрану та додати їх у звіт з описом кожного скіншота
11. Додати програмний код завдання для самомтійного виконання
12. Дати відповіді на контрольні запитання
13. Зберегти звіт у форматі PDF

## Контрольні питання
1. Для чого використовується бібліотека GD?
2. Які відмінності між бібліотеками GD та GD2?
3. Яким чином можна зберегти зображення на диск?
4. Яким чином зчитати зображення з диску для редагування?
5. Яким чином повернути зображення у HTTP-відповідь?
6. Що таке SVG?
7. Чим відрізняється векторна графіка від растрової?

## Приклади

1. [Створення діаграми GD2 1](src/lab-09/diagram_png_1.php)
2. [Створення діаграми GD2 2](src/lab-09/diagram_png_2.php)
3. [Створення діаграми SVG](src/lab-09/diagram_svg.php)
4. [Накладання водяного знаку](src/lab-09/watermark.php)
5. [Стовпчата діаграма в SVG](src/lab-09/diagram_1.svg)

## Довідники та додаткові матеріали
1. [Офіційний сайт розробників PHP (англійська)](https://www.php.net/)
2. [Офіційна документація від розробників PHP (англійська, російська)](https://www.php.net/docs.php)
3. [Портал по PHP, MySQL и другим веб-технологиям](http://www.php.su/)
4. [Date/Time Functions](https://www.php.net/manual/en/ref.datetime.php)
5. [phpinfo() Function](https://www.php.net/manual/en/function.phpinfo.php)
