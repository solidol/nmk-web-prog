[Перелік усіх робіт](README.md)

# Лабораторна робота №7. Робота з файлами та збереження даних

## Зміст

- [Лабораторна робота №7. Робота з файлами та збереження даних](#лабораторна-робота-7-робота-з-файлами-та-збереження-даних)
  - [Зміст](#зміст)
  - [Мета роботи](#мета-роботи)
  - [Обладнання](#обладнання)
  - [Теоретичні відомості](#теоретичні-відомості)
    - [Завантаження файлів по HTTP та обробка файлів на сервері](#завантаження-файлів-по-http-та-обробка-файлів-на-сервері)
    - [Читання вмісту файлу та виведення його на екран](#читання-вмісту-файлу-та-виведення-його-на-екран)
  - [Хід роботи](#хід-роботи)
  - [Контрольні питання](#контрольні-питання)
  - [Приклади](#приклади)
  - [Довідники та додаткові матеріали](#довідники-та-додаткові-матеріали)

## Мета роботи

Ознайомитися з методами читання та запису даних у файл

## Обладнання

Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera

## Теоретичні відомості

### Завантаження файлів по HTTP та обробка файлів на сервері

Завантаження файлів на сервер здійснюється через HTTP-протокол за допомогою HTML-форми з атрибутом `enctype="multipart/form-data"`. Це дозволяє браузеру передавати файли у спеціальному форматі, який сервер може розпізнати.

**Основні етапи завантаження файлів:**
1. Користувач вибирає файл у формі на веб-сторінці.
2. Форма надсилає файл на сервер методом POST.
3. Сервер отримує файл у суперглобальному масиві `$_FILES`.
4. Сервер перевіряє тип, розмір, ім'я файлу та переміщує його у потрібну директорію.

**Обробка файлу на сервері (PHP):**  
Див. приклад [`src/upload.php`](src/upload.php)

**Ключові моменти:**
- Атрибут `enctype="multipart/form-data"` обов'язковий для передачі файлів.
- Файл тимчасово зберігається на сервері, поки не буде переміщений у потрібну папку.
- Для безпеки перевіряйте тип і розмір файлу.
- Функція `move_uploaded_file()` використовується для остаточного збереження файлу.

### Читання вмісту файлу та виведення його на екран

Для читання всього вмісту текстового файлу та виведення його на сторінку можна скористатися функцією `file_get_contents()`.  
Див. приклад [`src/read_file.php`](src/read_file.php)

## Хід роботи
1. Впевнитись, що пакет XAMPP встановлено та web-сервер Apache запущений
2. Перейти до каталогу `C:\xampp\htdocs\` та очистити його
3. Створити текстовий файл file.txt і записати до нього довільний текст у 10 рядків
4. Створити файл files.php, який буде обробляти текстові файли та виконайте наступні завдання

5. Завантаження текстового файлу та підрахунок кількості слів:
   - Реалізуйте форму для завантаження текстового файлу.
   - Після завантаження виведіть кількість слів у файлі.
   - Додайте поле для введення слова.
   - Після завантаження файлу і введення слова виведіть кількість входжень цього слова у файлі.
   - Після завантаження текстового файлу виведіть список усіх унікальних слів, які містяться у файлі.
   - Після обробки текстового файлу (наприклад, підрахунку слів або пошуку) запропонуйте користувачу завантажити новий файл з результатами обробки.
    - Після завантаження текстового файлу виведіть для кожного рядка кількість символів та слів.

6.  Створіть сценарій з наступними функціями:
    + сценарій виводить форму з полем багаторядкового вводу та записує інформацію у текстові файли у директорію `messages` з форматом імені, що відповідає поточному даті та часу: `xxx-xx-xx xx:xx:xx.txt`
    + використовуючи функцію `file_get_contents()`, сценарій виводить зміст файлі користувачу
    + прочитайте файли порядково, та кожен рядок загорніть в тег `<p>` та виведіть весь зміст у відформатованому вигляді, а перед змістом кожного файла вставте заголовок другого рівня з іменем файлу
7.  Створіть сценарій з наступними функціями:
    - сценарій виводить користувачеві форму вводу із можливістю завантаження текстових файлів
    - текстові файли, які були завантажені зберігаються у директорії `texts`
    - у якості параметру сценарію можна передати ім'я збереженого файлу і сценарій повинен вивести зміст файлу  
8.  Впевнитись, що всі вихідні HTML-сторінки є валідними, використавши валідатор HTML-коду [validator.w3.org](https://validator.w3.org/). За необхідності, виправити помилки та зауваження
9.  Для кожного етапу роботи зробити знімки екрану та додати їх у звіт з описом кожного скіншота
10. Додати програмний код завдання для самомтійного виконання
11. Дати відповіді на контрольні запитання
12. Зберегти звіт у форматі PDF

## Контрольні питання
1. На які етапи поділяється робота з файлами?
2. Які існують режими відкриття файлу?
3. Для чого використовується функція `fgets()`?
4. Якою функцією можна видалити рядки з файлу?
5. Як зберегти завантажений на сервер файл?
6. Як прочитати текстовий файл в масив рядків?
7. Які недоліки збереження даних у файлах?

## Приклади

1. [Читання файлу](src/read_1.php)
2. [Запис у файл](src/write_1.php)
3. [Приклад users.json](src/users.json)

## Довідники та додаткові матеріали

1. [PHP File Handling](https://www.w3schools.com/php/php_file.asp)
2. [PHP Manual. Handling file uploads](https://www.php.net/manual/en/features.file-upload.php)
3. [PHP Manual. Directory Functions](https://www.php.net/manual/en/ref.dir.php)
4. [PHP Обробка файлів](https://w3schoolsua.github.io/php/php_file.html#gsc.tab=0)
5. [PHP Обробка форми](https://w3schoolsua.github.io/php/php_forms.html#gsc.tab=0)
6. [PHP Відкрити/Читати/Закрити файл](https://w3schoolsua.github.io/php/php_file_open.html#gsc.tab=0)