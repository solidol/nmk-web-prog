[Перелік усіх робіт](README.md)

# Лабораторна робота №24. Створення маршрутів, шаблонів та налаштування контроллерів

## Мета роботи

Навчитися працювати з моделями, розділяти проєкт на структурні частини, використовувати файли конфігурації для збереження налаштувань проекту.

## Обладнання

Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera

## Теоретичні відомості

### Маршрути

Маршрути в Laravel — це механізм, який визначає, як HTTP-запити повинні бути оброблені вашим додатком. Laravel має елегантну та потужну систему маршрутизації, яка дозволяє зручно визначати маршрути і керувати обробкою запитів.

Маршрути визначаються у файлі web.php (для веб-маршрутів) або api.php (для API-маршрутів). Ви можете використовувати фасад Route для визначення різних типів маршрутів, для передачі параметрів у маршруті можна використовувати фігурні дужки:

```php
// Базовий GET-маршрут
Route::get('/welcome', function () {
    return 'Привіт, світ!';
});

// Маршрут з параметром
Route::get('/user/{id}', function ($id) {
    return 'Користувач з ID ' . $id;
});
```

Ви можете визначати маршрути для різних HTTP-методів, таких як GET, POST, PUT, PATCH, DELETE тощо:

```php
Route::post('/user', 'UserController@store');
Route::put('/user/{id}', 'UserController@update');
```

Ви можете називати маршрути, щоб звертатися до них з інших частин вашого коду та компонувати їх у грипи за певними ознаками:

```php
Route::controller(UserController::class)->group(function () {
    Route::get('/users', 'index')->name('users.index');
    Route::get('/users/create', 'create')->name('users.create');
    Route::post('/users/store', 'store')->name('users.store');
    Route::get('/users/{user}/edit', 'edit')->name('users.edit');
});
```

### Контролери

Контролери в Laravel відіграють ключову роль у відділенні бізнес-логіки вашого додатка від маршрутів та визначають, як саме повинен оброблятися конкретний HTTP-запит. Контролери забезпечують організований спосіб роботи з логікою вашого додатка та вирішують задачу обробки конкретної операції або відображення конкретної сторінки.

Створити контролер можна за допомогою `artisan`

```sh
php artisan make:controller UserController
```

Кожен метод контролера призначений для обробки окремої дії користувача. 

В Laravel немає жорстких правил щодо назв методів контролера, і ви можете вибирати назви, які найкраще відповідають вашим потребам. Проте, існують деякі загальні конвенції і рекомендації, які допоможуть зробити ваш код більш читабельним та сприятливим до зрозуміння. Ось деякі типові назви методів контролера, які можуть використовуватися:

1. index: Метод index відповідає за відображення списку ресурсів. Наприклад, відображення списку користувачів.
2. show: Метод show відповідає за відображення конкретного ресурсу за його ідентифікатором.
3. create: Метод create може використовуватися для відображення форми створення нового ресурсу.
4. store: Метод store приймає дані з форми створення та зберігає новий ресурс.
5. edit: Метод edit відповідає за відображення форми редагування існуючого ресурсу.
6. update: Метод update приймає дані з форми редагування та оновлює існуючий ресурс.
7. destroy: Метод destroy відповідає за видалення існуючого ресурсу.

Ці конвенції допомагають робити код більш зрозумілим та стандартизованим, але ви можете користуватися тими назвами методів, які найкраще відповідають вашим потребам та конкретним вимогам вашого проекту.

Типовий контролер може виглядати наступним чином:

```php
<?php

namespace App\Http\Controllers;

use Illuminate\Support\Facades\Session;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use App\Models\User;

class UserController extends Controller
{

    public function index()
    {
        $users = User::all();
        return view('auth.index', ['users' => $users]);
    }

    function show(User $user)
    {
        if (Auth::user()->isAdmin()) {
            return view('auth.profile', ['user' => $user]);
        } else
            return view('auth.login');
    }


    function createToken(Request $request)
    {
        $token = $request->user()->createToken($request->token_name);
        return ['token' => $token->plainTextToken];
    }
}
```

## Хід роботи
1. Впевнитись, що пакет XAMPP встановлено, web-сервер Apache запущений, віртуальний хост сворено та на ньому розгорнений фреймворк Laravel
2. Перейти до каталогу `C:\xampp\htdocs\laravel_test`, який було створено у ЛР 21 - ЛР 23. 
3. Впевніться, що установка пройшла успішно і фреймворк запускається
4. Відповідно до тематики вашої роботи, розробіть контролери до кожної моделі для тих дій користувача, які необхідно оброблювати.
5.  Створіть шаблони для кожної моделі, що будуть підключені до кожного методу певних контролерів.
6.  Створіть маршрути, та у якості обробників призначте відповідні методи відповідних контролерів. 
7.  Впевніться, що авторизація працює, перейдіть за посиланням `http://laravel.test/login`.
8.  Згрупуйте маршрути за ознаками: належність до певного класу контролера та доступ тільки після авторизації.
9.  Зафіксуйте зміни в проєкті та аивантажте проєкт на Github.
10. Для кожного етапу роботи зробіть знімки екрану та додайте їх у звіт з описом кожного скіншота.
11. Дайте відповіді на контрольні запитання
12. Додайте в кінці звіту посилання на репозиторій з лабораторною роботою
13. Збережіть звіт у форматі PDF
14. Додайте звіт до репозиторія

## Приклади

1. [Папка порожнього проекту (без підкаталога vendor)](src/lab-21/)


## Контрольні питання

1. Як визначаються маршрути в Laravel?
2. Як можна передавати параметри через URL у маршрутах?
3. Що таке middleware, і як вони використовуються в контексті маршрутів?
4. Як створити групу маршрутів в Laravel? Для чого це використовується?
5. Як передавати дані з маршрутів до методів контролера?
6. Як створити новий контролер за допомогою Artisan в Laravel?
7. Як підключити HTML-шаблони в методах контролера?


## Довідники та додаткові матеріали

1. [Laravel](https://laravel.com/)
2. [Eloquent: Getting Started](https://laravel.com/docs/10.x/eloquent)
3. [Eloquent: Relationships](https://laravel.com/docs/10.x/eloquent-relationships)
4. [npm - a JavaScript package manager](https://www.npmjs.com/package/npm)
5. [Laravel UI](https://github.com/laravel/ui)


## Альтернатвні теми за варіантами

Варіяант для виконання самостійних завдань

1. Каталог товарів продуктового магазину
2. Каталог книг у бібліотеці
3. Дошка оголошень
4. Фотогалерея
5. Каталог запчастин автомобілів
6. Індивідуальний електронний записник
7. Каталог рієлтора
8. Каталог бази будівельних матеріалів
9. Власний блог
10. Розклад маршрутів автовокзалу