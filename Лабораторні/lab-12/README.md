[Перелік усіх робіт](README.md)

# Лабораторна робота №12. Використання PDO для обміну даними з СКБД

## Мета роботи

Вивчити принципи підключення та виконання запитів до СКБД з використанням драйвера PDO.

## Обладнання

Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera

## Теоретичні відомості

PDO (PHP Data Objects) - це розширення для мови програмування PHP, яке надає зручний і безпечний спосіб взаємодії з реляційними базами даних. PDO дозволяє PHP-розробникам використовувати однаковий інтерфейс для роботи з різними системами управління базами даних, такими як MySQL, PostgreSQL, SQLite, Oracle та інші. Він служить абстракцією бази даних і надає безпечні запити до бази даних, запобігаючи атакам SQL-ін'єкції.

![PDO](img/12-010.png)

PDO та MySQLi - це два основних способи взаємодії з базами даних MySQL в PHP, але PDO в порівнянні з MySQLi має ряд переваг:

1. Підтримка різних СУБД: PDO підтримує багато різних систем управління базами даних (СУБД), включаючи MySQL, PostgreSQL, SQLite, Oracle та інші. Це означає, що ви можете використовувати один і той самий код для взаємодії з різними СУБД, змінюючи лише параметри підключення.
2. Параметризовані запити: PDO сприяє безпеці, оскільки він полегшує використання параметризованих запитів, що допомагає запобігти атакам SQL-ін'єкції. У MySQLi також є можливість використовувати параметризовані запити, але синтаксис може бути трохи складнішим.
3. Об'єктно-орієнтований інтерфейс: PDO надає об'єктно-орієнтований інтерфейс для взаємодії з базою даних, що спрощує роботу з кодом та покращує його читабельність.
4. Підтримка транзакцій: PDO має вбудовану підтримку транзакцій, що дозволяє вам виконувати кілька запитів як єдину транзакцію, яку можна відкотити (ROLLBACK) або підтвердити (COMMIT) за необхідності. У MySQLi також є підтримка транзакцій, але її використання може бути складнішим.
5. Інші функції та можливості: PDO має деякі інші корисні можливості, такі як підтримка роботи з різними типами даних (наприклад, об'єктами та масивами), що може бути зручним для розробників.

## Хід роботи

1. Впевніться, що пакет XAMPP встановлено та web-сервер Apache запущений.
2. Перейдіть до каталогу `C:\xampp\htdocs\` та очистіть його.
3. Створіть нову базу даних та таблицю користувачів відповідно до структури завдання (ідентифікатор, логін, ПІБ, email, пароль).
4. Підключіться до бази даних за допомогою PDO. Перевірте підключення та обробку помилок.
5. Реалізуйте додавання нового користувача через HTML-форму з використанням підготовлених запитів PDO. Переконайтесь, що паролі зберігаються у вигляді хешу (рекомендується password_hash()).
6. Реалізуйте авторизацію користувача:  
   - Створіть форму входу.
   - Перевіряйте логін і пароль через PDO та password_verify().
   - Реалізуйте збереження сесії для авторизованого користувача.
7. Реалізуйте сторінку перегляду списку користувачів (доступна лише для авторизованих).
8. Додайте можливість перегляду детальної інформації про одного користувача.
9. Додайте можливість виходу з авторизованої сесії (logout).
10. Додайте функцію редагування та видалення користувача (опціонально, для бажаючих).
11. Додайте захист від SQL-ін'єкцій у всіх запитах (використовуйте підготовлені запити).
12. Перевірте, що всі HTML-сторінки є валідними, використавши [validator.w3.org](https://validator.w3.org/).
13. Для кожного етапу роботи зробіть знімки екрану та додайте їх у звіт з описом кожного скіншота.
14. Додайте програмний код завдання для самостійного виконання.
15. Дайте відповіді на контрольні запитання.
16. Додайте в кінці звіту посилання на репозиторій та папку з лабораторною роботою.
17. Збережіть звіт у форматі PDF.
18. Додайте звіт до репозиторія.

## Приклади

1. [Додавання користувачів](src/lab-12/users1.php)
2. [Перегляд списку користувачів](src/lab-12/users2.php)
3. [Перегляд одного користувача](src/lab-12/users3.php)
4. [Авторизація користувача](src/lab-12/auth1.php)

## Контрольні питання

1.  Що таке PDO і для чого воно використовується в PHP?
2.  Які переваги надає використання PDO в порівнянні з іншими методами взаємодії з базами даних?
3.  Які типи баз даних підтримуються PDO?
4.  Як створити підключення до бази даних за допомогою PDO?
5.  Як відбувається обробка помилок та винятків при використанні PDO?
6.  Що таке параметризовані запити і як їх використовувати за допомогою PDO?
7.  Як використовувати підготовлені запити для підвищення безпеки та продуктивності?
8.  Як вивести результати запиту у вигляді асоціативного масиву або об'єктів з PDO?

## Довідники та додаткові матеріали

1. [Объекты данных PHP](https://www.php.net/manual/ru/book.pdo.php)
2. [PHP + PDO. Работа с MySQL](https://www.youtube.com/watch?v=a9l3QPMqZ1Q)
3. [PHP md5()](https://www.php.net/manual/ru/function.md5.php)
4. [Функции Hash](https://www.php.net/manual/ru/ref.hash.php)
5. [Session Handling](https://www.php.net/manual/en/book.session.php)
6. [PHP Sessions](https://www.w3schools.com/php/php_sessions.asp)

## Альтернатвні теми за варіантами

Варіяант для виконання самостійних завдань

1. Каталог товарів продуктового магазину
2. Каталог книг у бібліотеці
3. Дошка оголошень
4. Фотогалерея
5. Каталог запчастин автомобілів
6. Індивідуальний електронний записник
7. Каталог рієлтора
8. Каталог бази будівельних матеріалів
9. Власний блог
10. Розклад маршрутів автовокзалу