# Лекція 1. Вебсервери. Динамічні сайти. Серверні мови програмування

[Перелік лекцій](../README.md)


Обмін даними у Web-технології поділяється відповідно до типів методів доступу протоколу HTTP та видів запитів у специфікації CGI.

Основних методів доступу два: GET та POST. Крім них часто використовуються HEAD та PUT.

Види запитів CGI поділяють на два основні MIME-типи: `application/x-www-form-urlencoded` та `multipart/form-data`. Другий тип запиту спеціально створено передачі великих зовнішніх файлів.

Цю класифікацію можна подати у вигляді таблиці:

<table border="0" class="xml_table" cellpadding="2" cellspacing="1">

<tbody>

<tr>

<th colspan="2" bgcolor="#d8d8d8">Метод</th>

<th bgcolor="#d8d8d8">Клиент --> Сервер</th>

<th bgcolor="#d8d8d8">Клиент <-- Сервер</th>

</tr>

<tr>

<td rowspan="3" bgcolor="#eaeaea" valign="top">GET</td>

<td bgcolor="#eaeaea" valign="top">По умолчанию</td>

<td bgcolor="#eaeaea" valign="top">Только HTTP-заголовок</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и страница, как тело HTTP-сообщения</td>

</tr>

<tr>

<td bgcolor="#eaeaea" valign="top">isindex</td>

<td bgcolor="#eaeaea" valign="top">Только HTTP-заголовок (список ключевых слов включен в URL. Слова разделены символом "+". Кодирования кириллицы не производится)</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и страница, как тело HTTP-сообщения</td>

</tr>

<tr>

<td bgcolor="#eaeaea" valign="top">form-urlencoded</td>

<td bgcolor="#eaeaea" valign="top">Только HTTP-заголовок (данные из формы включены в URL страницы. Производится кодирование специальных символов и кириллицы) и тело HTTP-сообщения</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и страница, как тело HTTP-сообщения</td>

</tr>

<tr>

<td rowspan="2" bgcolor="#eaeaea" valign="top">POST</td>

<td bgcolor="#eaeaea" valign="top">form-urlencoded</td>

<td bgcolor="#eaeaea" valign="top">Только HTTP-заголовок (данные из формы включены в URL страницы. Производится кодирование специальных символов и кириллицы) и тело HTTP-сообщения</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и страница, как тело HTTP-сообщения</td>

</tr>

<tr>

<td bgcolor="#eaeaea" valign="top">form-data</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и составное тело HTTP-сообщения. Первая часть тела — данные из формы, для которых производится кодирование, вторая часть тела — присоединенный файл как он есть</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и страница, как тело HTTP-сообщения</td>

</tr>

<tr>

<td colspan="2" bgcolor="#eaeaea" valign="top">PUT</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок и документ, как тело HTTP-сообщения</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок. В качестве тела можно передать комментарий к коду возврата</td>

</tr>

<tr>

<td colspan="2" bgcolor="#eaeaea" valign="top">HEAD</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок</td>

<td bgcolor="#eaeaea" valign="top">HTTP-заголовок</td>

</tr>

</tbody>

</table>

## HyperText Transfer Protocol

Усі дані у рамках Web-технології передаються за протоколом HTTР. Виняток становить обмін з використанням програмування Java або обмін з Plugin-додатків. Враховуючи реальний обсяг трафіку, який передається в рамках Web-обміну HTTP, ми розглядатимемо лише цей протокол. При цьому ми зупинимося на таких питаннях, як:

* загальна структура повідомлень;
* методи доступу;
* Оптимізація обмінів.

### Загальна структура повідомлень

HTTP – це протокол прикладного рівня. Він орієнтований модель обміну " клієнт-сервер " . Клієнт та сервер обмінюються фрагментами даних, які називаються HTTP-повідомленнями. Повідомлення, надіслані клієнтом серверу, називають запитами, а повідомлення, що надсилаються сервером клієнту - відгуками. Повідомлення може складатися з двох частин: заголовка та тіла. Тіло від заголовка відокремлюється порожнім рядком.

Заголовок містить службову інформацію, необхідну обробки тіла повідомлення чи управління обміном. Заголовок складається з директив заголовка, які зазвичай записуються кожна на новому рядку.

Тіло повідомлення не обов'язкове, на відміну від заголовка повідомлення. Воно може містити текст, графіку, аудіо або відеоінформацію.

Нижче наведено HTTP-запит:

```
GET/HTTP/1.0
Accept: image/jpeg
порожній рядок
```

І відгук:

```
HTTP/1.0 200 OK
Date: Fri, 24 Jul 1998 21:30:51 GMT
Server: Apache/1.2.5
Content-type: text/html
Content-length: 21345
порожній рядок

...
```

Текст "порожній рядок" - це просто позначення наявності порожнього рядка, який відокремлює заголовок HTTP-повідомлення від його тіла.

Сервер, приймаючи запит від клієнта, частина інформації заголовка HTTP-запиту перетворює на змінні оточення, які доступні для аналізу CGI-скриптом. Якщо запит має тіло, воно стає доступним скрипту через потік стандартного введення. Методи доступу

Найголовнішою директивою HTTP-запиту є метод доступу. Він вказується першим словом у першому рядку запиту. У прикладі це GET. Розрізняють чотири основні методи доступу:

* GET;
* HEAD;
* POST;
* PUT.

Крім цих чотирьох методів, існує ще близько п'яти додаткових методів доступу, але вони використовуються рідко.

### Метод GET

Метод GET застосовується клієнтом за запитом до сервера за промовчанням. У цьому випадку клієнт повідомляє адресу ресурсу (URL), яку він хоче отримати, версію протоколу HTTP, підтримувані ним MIME-типи документів, версію та назву клієнтського програмного забезпечення. Всі ці параметри вказуються в заголовку запиту HTTP. Тіло у запиті не передається.

У відповідь сервер повідомляє версію протоколу HTTP, код повернення, тип вмісту тіла повідомлення, розмір тіла повідомлення та ряд інших необов'язкових директив HTTP-заголовка. Сам ресурс, зазвичай HTML-сторінка, передається у тілі відгуку.

### Метод HEAD

Метод HEAD використовується зменшення обмінів під час роботи з протоколу HTTP. Він аналогічний методу GET крім того, що у відгуку тіло повідомлення не передається. Даний метод використовується для перевірки часу останньої модифікації ресурсу та терміну придатності кешованих ресурсів, а також при використанні програм сканування ресурсу